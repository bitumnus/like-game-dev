!function(t){function e(e){for(var n,a,s=e[0],l=e[1],h=e[2],c=0,f=[];c<s.length;c++)a=s[c],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);for(u&&u(e);f.length;)f.shift()();return r.push.apply(r,h||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],n=!0,s=1;s<i.length;s++){var l=i[s];0!==o[l]&&(n=!1)}n&&(r.splice(e--,1),t=a(a.s=i[0]))}return t}var n={},o={0:0},r=[];function a(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=n,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var h=0;h<s.length;h++)e(s[h]);var u=l;r.push([140,1]),i()}({140:function(t,e,i){"use strict";i.r(e);i(87),i(93),i(94),i(95),i(96),i(98),i(99),i(100),i(73),i(104),i(106),i(107),i(108),i(79),i(110),i(14),i(111),i(113),i(115),i(122),i(126),i(128),i(130);var n=i(0),o={0:{0:{x:0,y:0},1:{x:240,y:0},2:{x:483,y:0}},1:{0:{x:0,y:160},1:{x:240,y:160},2:{x:483,y:160}},2:{0:{x:0,y:320},1:{x:240,y:320},2:{x:483,y:320}}};function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=70,this.y=25,this.width=715,this.height=300,this.id=e,this.initialize()}var e,i,a;return e=t,(i=[{key:"initialize",value:function(){this.reelContainer=new n.b,this.reelContainer.x=this.x,this.reelContainer.y=this.y,this.reelContainer.width=this.width,this.reelContainer.height=this.height,this.fillReels()}},{key:"fillReels",value:function(){var t=!!this.autoWin&&this.randomInt(0,2),e=!!this.autoWin&&this.randomInt(1,5);this.reelContainer.removeChildren(),this.rollResult=[],this.rollResultItem=[];for(var i=0;i<=2;i++){var r={symbols:[],position:0,previousPosition:0,blur:new n.i.BlurFilter};r.blur.blurX=0,r.blur.blurY=0,this.rollResult[i]=[];for(var a=0;a<=2;a++){var s=i===t?e:this.randomInt(0,5);this.rollResult[i].push(s);var l=new n.e(n.g.from(this.id.reel[s].url));l.x=o[i][a].x,l.y=o[i][a].y,l.scale.x=l.scale.y=Math.min(192/l.width,192/l.height),this.reelContainer.addChild(l),r.symbols.push(l)}this.rollResultItem.push(r)}}},{key:"randomInt",value:function(t,e){return Math.floor(Math.random()*(e-t+1))+t}}])&&r(e.prototype,i),a&&r(e,a),t}();function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var l=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=e,this.height=i,this.initialize()}var e,i,o;return e=t,(i=[{key:"initialize",value:function(){this.layout=new n.c,this.layout.beginFill("0x26C350"),this.layout.lineStyle(5,"0x26C350"),this.layout.drawRect(0,0,this.width,this.height),this.layout.alpha=.5,this.layout.interactive=!0,this.layout.buttonMode=!0}}])&&s(e.prototype,i),o&&s(e,o),t}();function h(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var u=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=e,this.height=i,this.text=n,this.winTextStyle={fontFamily:"Arial",fontWeight:"bold",fontSize:"76px",align:"center",fill:"yellow"},this.initialize()}var e,i,o;return e=t,(i=[{key:"initialize",value:function(){this.text=new n.f(this.text,this.winTextStyle),this.text.position.x=this.width/2-76,this.text.position.y=this.height/2-50}}])&&h(e.prototype,i),o&&h(e,o),t}();function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var f=function(){function t(e,i,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.width=i,this.height=n,this.startReel=o,this.initialize()}var e,i,o;return e=t,(i=[{key:"initialize",value:function(){return this.buttonActive=new n.h(n.g.from(this.id.tools.BTN_Spin.url),this.id.tools.BTN_Spin.sourceSize.w,this.id.tools.BTN_Spin.sourceSize.h),this.buttonActive.x=this.width-this.id.tools.BTN_Spin.sourceSize.w-38,this.buttonActive.y=this.height/2-49,this.buttonActive.interactive=!0,this.buttonActive.buttonMode=!0,this.buttonActive.on("click",this.startReel.bind(this)),this.buttonActive}}])&&c(e.prototype,i),o&&c(e,o),t}();function d(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var p=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.width=i,this.height=n,this.initialize()}var e,i,o;return e=t,(i=[{key:"initialize",value:function(){return this.buttonOff=new n.h(n.g.from(this.id.tools.BTN_Spin_d.url),this.id.tools.BTN_Spin_d.sourceSize.w,this.id.tools.BTN_Spin_d.sourceSize.h),this.buttonOff.x=this.width-this.id.tools.BTN_Spin_d.sourceSize.w-38,this.buttonOff.y=this.height/2-49,this.buttonOff.visible=!1,this.buttonOff}}])&&d(e.prototype,i),o&&d(e,o),t}();function y(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var v=function(){function t(e,i,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.infoStyle={fontFamily:"Arial",fontSize:"14px",align:"center",fill:"yellow"},this.infobar=null,this.width=e,this.height=i,this.coins=o,this.wins=n,this.initialize()}var e,i,o;return e=t,(i=[{key:"initialize",value:function(){this.infobar=new n.b,this.infobar.x=this.width,this.infobar.y=this.height,this.infobar.width=100,this.infobar.height=50,this.infobarLayout=new n.c,this.infobarLayout.beginFill("black"),this.infobarLayout.lineStyle(5,"black"),this.infobarLayout.drawRect(0,0,100,50),this.totalWinsText=new n.f("Wins: "+this.wins,this.infoStyle),this.totalWinsText.position.x=5,this.totalWinsText.position.y=8,this.totalCoinsText=new n.f("Coins: "+this.coins,this.infoStyle),this.totalCoinsText.position.x=5,this.totalCoinsText.position.y=27,this.infobar.addChild(this.infobarLayout,this.totalWinsText,this.totalCoinsText)}}])&&y(e.prototype,i),o&&y(e,o),t}();function b(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return w(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return w(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw r}}}}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function g(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.loader=n.d.shared,this.background="",this.buttonActive="",this.buttonOff="",this.countRolls=0,this.reelContainer="",this.rollResult=[],this.tweening=[],this.id={},this.autoWin=!1,this.running=!1,this.gameOver=!1,this.displayedWins=0,this.coins=100,this.textDisplayed=!1,this.init()}var e,i,r;return e=t,(i=[{key:"init",value:function(){var t=this;this.app=new n.a({width:960,height:536,antialias:!0,transparent:!1,resolution:1}),document.body.appendChild(this.app.view),this.loader.add("texturepack","src/assets/sprites.json"),this.loader.load((function(e,i){t.addLoadingScreen(),t.id=i.texturepack.data,t.background=new n.h(n.g.from(t.id.tools.BG.url),t.app.view.width,t.app.view.height),t.app.stage.addChild(t.background),t.createActiveButton(),t.createButtonOff(),t.createReel(),t.renderInfobar(),t.startPlay(),t.animateUpdate(),t.animateTicker()})),this.loader.onProgress.add((function(){})),this.loader.onComplete.add((function(){t.loadingText.visible=!1}))}},{key:"addLoadingScreen",value:function(){this.layout=new n.c,this.layout.beginFill("0x000000"),this.layout.lineStyle(5,"0x000000"),this.layout.drawRect(0,0,this.app.width,this.app.height),this.loadingText=new n.f("LOADING...",this.winTextStyle),this.loadingText.position.x=this.app.view.width/2-200,this.loadingText.position.y=this.app.view.height/2-70,this.app.stage.addChild(this.layout,this.loadingText)}},{key:"startReel",value:function(){this.countRolls>=4?(this.autoWin=!0,this.countRolls=0):this.countRolls++,this.reelContainer.fillReels(),this.startPlay(),this.animateTicker(),this.animateUpdate(),this.checkWinning(),this.autoWin=!1}},{key:"startPlay",value:function(){if(!this.running){this.running=!0;for(var t=0;t<this.reelContainer.rollResultItem.length;t++){var e=this.reelContainer.rollResultItem[t],i=Math.floor(Math.random()*this.reelContainer.rollResultItem.length),n=e.position+10+5*t+i,o=2500+600*t+600*i;this.tweenTo(e,"position",n,o,this.backout(.5),null,2===t?this.reelsComplete():null)}}}},{key:"reelsComplete",value:function(){this.running=!1}},{key:"backout",value:function(t){return function(e){return--e*e*((t+1)*e+t)+1}}},{key:"checkWinning",value:function(){this.coins-=5;var t,e=b(this.reelContainer.rollResult);try{for(e.s();!(t=e.n()).done;){var i=t.value;if(i.every((function(t,e,i){return t===i[0]}))||i.includes(0)&&this.countDuplicates(i)>=1)return this.displayedWins++,this.coins+=10,this.showText("YOU WON!"),void this.disableButton()}}catch(t){e.e(t)}finally{e.f()}this.renderInfobar(),this.coins<=0&&(this.showText("NO COINS :("),this.gameOver=!0,this.disableButton())}},{key:"countDuplicates",value:function(t){var e,i=new Set,n=new Set,o=b(t);try{for(o.s();!(e=o.n()).done;){var r=e.value;i.has(r)?(n.add(r),i.delete(r)):i.add(r)}}catch(t){o.e(t)}finally{o.f()}return n.size}},{key:"disableButton",value:function(){this.buttonActive.buttonActive.visible=!1,this.buttonOff.buttonOff.visible=!0}},{key:"enableButton",value:function(){this.buttonActive.buttonActive.visible=!0,this.buttonOff.buttonOff.visible=!1}},{key:"hideText",value:function(){this.layout.layout&&this.layout.layout.destroy(),this.text.text&&this.text.text.destroy()}},{key:"closeWinMessage",value:function(){this.textDisplayed&&!this.gameOver&&(this.hideText(),this.enableButton(),this.textDisplayed=!1,this.renderInfobar())}},{key:"renderInfobar",value:function(){this.infobar=new v(this.app.view.width-136,this.app.view.height/2+80,this.displayedWins,this.coins),this.app.stage.addChild(this.infobar.infobar)}},{key:"createActiveButton",value:function(){this.buttonActive=new f(this.id,this.app.view.width,this.app.view.height,this.startReel.bind(this)),this.app.stage.addChild(this.buttonActive.buttonActive)}},{key:"createButtonOff",value:function(){this.buttonOff=new p(this.id,this.app.view.width,this.app.view.height),this.app.stage.addChild(this.buttonOff.buttonOff)}},{key:"createReel",value:function(){this.reelContainer=new a(this.id),this.app.stage.addChild(this.reelContainer.reelContainer)}},{key:"showText",value:function(t){this.layout=new l(this.reelContainer.reelContainer.width,this.reelContainer.reelContainer.height),this.text=new u(this.reelContainer.reelContainer.height,this.reelContainer.reelContainer.height,t),this.textDisplayed=!0,this.layout.layout.on("click",this.closeWinMessage.bind(this)),this.reelContainer.reelContainer.addChild(this.layout.layout,this.text.text),setTimeout(this.closeWinMessage.bind(this),2e3)}},{key:"tweenTo",value:function(t,e,i,n,o,r,a){var s={object:t,property:e,propertyBeginValue:t[e],target:i,easing:o,time:n,change:r,complete:a,start:Date.now()};return this.tweening.push(s),s}},{key:"animateUpdate",value:function(){var t=this;this.app.ticker.add((function(e){for(var i=0;i<t.reelContainer.rollResultItem.length;i++){var r=t.reelContainer.rollResultItem[i];r.blur.blurY=8*(r.position-r.previousPosition),r.previousPosition=r.position;for(var a=0;a<r.symbols.length;a++){var s=r.symbols[a],l=s.y;s.y=(r.position+a)%3*200-20,s.y<0&&l>200&&(s.texture=n.g.from(t.id.reel[Math.floor(6*Math.random())].url),s.scale.x=s.scale.y=Math.min(200/s.texture.width,200/s.texture.height),s.x=o[a][i].x)}}}))}},{key:"animateTicker",value:function(){var t=this;function e(t,e,i){return t*(1-i)+e*i}this.app.ticker.add((function(i){for(var n=Date.now(),o=[],r=0;r<t.tweening.length;r++){var a=t.tweening[r],s=Math.min(1,(n-a.start)/a.time);a.object[a.property]=e(a.propertyBeginValue,a.target,a.easing(s)),a.change&&a.change(a),1===s&&(a.object[a.property]=a.target,a.complete&&a.complete(a),o.push(a))}for(var l=0;l<o.length;l++)t.tweening.splice(t.tweening.indexOf(o[l]),1)}))}}])&&g(e.prototype,i),r&&g(e,r),t}())}});
//# sourceMappingURL=app.58c086b7.js.map